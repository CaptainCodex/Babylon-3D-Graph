function HoloGraphV2(e,a={}){const t={type:a.type||"bar",backgroundColor:"black",title:a.title||"App Demographic",xTitle:a.xTitle||"Date Range",yTitle:a.yTitle||"Users (millions)",zTitle:a.zTitle||"Age Groups",width:a.width||10,x:a.dates||["02/14/2019","02/15/2019","02/16/2019","02/17/2019","02/18/2019","02/19/2019","02/20/2019","02/21/2019","02/22/2019","02/23/2019","02/24/2019","02/25/2019","02/26/2019","02/27/2019","02/28/2019","02/29/2019","02/30/2019","02/31/2019","03/01/2019","03/02/2019","03/03/2019","03/04/2019","03/05/2019","03/06/2019","03/07/2019","03/08/2019","03/09/2019","03/10/2019","03/11/2019","03/12/2019","03/13/2019","03/14/2019","03/15/2019"],y:[],z:a.categories||["0-12","13-18","19-25","26-40","41-100"],values:a.data||[]};function r(e,a=10,t=10){var r=10;switch(e){case"x":r=t;break;case"z":r=a-1}var i=new BABYLON.StandardMaterial("whiteMaterial",x);i.diffuseColor=new BABYLON.Color3(1,0,1),i.specularColor=new BABYLON.Color3(.5,.6,.87),i.emissiveColor=new BABYLON.Color3(1,1,1),i.ambientColor=new BABYLON.Color3(.23,.98,.53);var o=new BABYLON.GridMaterial("grid",x);o.gridRatio=.1;for(var n=[],l=0,s=0;s<=10*r;s++){if(0===parseFloat((l.toFixed(2)%1).toFixed(2))){const a=BABYLON.Mesh.CreateSphere(e+"-sphere-"+s,64,.1,x);a.color=new BABYLON.Color3(1,1,1),a.position[e]=l,a.material=i}var B;switch(e){case"x":B=new BABYLON.Vector3(l,0,0);break;case"y":B=new BABYLON.Vector3(0,l,0);break;case"z":B=new BABYLON.Vector3(0,0,l)}n.push(B),l+=.1}return(e=BABYLON.Mesh.CreateLines(e+"-axis-line",n,x,!0)).color=new BABYLON.Color3(1,1,1),e.material=o,e}function i(e,a=10,t=10){var r,i=new BABYLON.GridMaterial("grid",x);switch(i.gridRatio=.1,i.backFaceCulling=!1,i.opacity=.5,i.alpha=.5,a=a?a-1:a,e){case"xz":if(!a)return;(r=new BABYLON.MeshBuilder.CreatePlane(e+"-plane",{width:t,height:a},x)).material=i,r.position.x=t/2,r.position.y=0,r.position.z=a/2,r.rotation.x=BABYLON.Tools.ToRadians(90);break;case"yz":if(!a)return;(r=new BABYLON.MeshBuilder.CreatePlane(e+"-plane",{width:a,height:10},x)).material=i,r.position.x=0,r.position.y=5,r.position.z=a/2,r.rotation.y=BABYLON.Tools.ToRadians(90);break;case"xy":(r=new BABYLON.MeshBuilder.CreatePlane(e+"-plane",{width:t,height:10},x)).material=i,r.position.x=t/2,r.position.y=5,r.position.z=a}return r}function o(e,a,t){var r=BABYLON.MeshBuilder.CreateGround("xLabel-"+a,{width:2,height:1,subdivisions:8},x);r.position.x=-.6+a,r.position.y=-1.1,r.position.z=0,r.rotation.x=BABYLON.Tools.ToRadians(-35),r.rotation.y=BABYLON.Tools.ToRadians(-90),r.rotation.z=BABYLON.Tools.ToRadians(90),r.parent=t,t.xLabels||(t.xLabels=[]),t.xLabels.push(r);var i=new BABYLON.DynamicTexture("xLabelTexture-"+a,{width:1024,height:512},x),o=i.getContext();o.textAlign="end",o.clearRect(0,0,1024,512);var n=new BABYLON.StandardMaterial("xLabelMat-"+a,x);n.hasAlpha=!0,n.backFaceCulling=!1,n.specularColor=new BABYLON.Color3(0,0,0),n.opacityTexture=i,n.diffuseTexture=i,r.material=n;i.drawText(e,1024,290,"bold 150px monospace","white","transparent",!0,!0)}function n(e,a){var t=BABYLON.MeshBuilder.CreateGround("yLabel-"+a,{width:2,height:1,subdivisions:8},x);t.position.x=-1.3,t.position.y=a,t.position.z=0,t.rotation.x=BABYLON.Tools.ToRadians(-90),t.rotation.y=BABYLON.Tools.ToRadians(-90),t.rotation.z=BABYLON.Tools.ToRadians(90);var r=new BABYLON.DynamicTexture("yLabelTexture-"+a,{width:1024,height:512},x),i=r.getContext();i.textAlign="end",i.clearRect(0,0,1024,512);var o=new BABYLON.StandardMaterial("yLabelMat-"+a,x);o.hasAlpha=!0,o.backFaceCulling=!1,o.specularColor=new BABYLON.Color3(0,0,0),o.opacityTexture=r,o.diffuseTexture=r,t.material=o;r.drawText(e,1024,300,"bold 150px monospace","white","transparent",!0,!0)}function l(e,a){var t=BABYLON.MeshBuilder.CreateGround("zLabel-"+a,{width:2,height:1,subdivisions:8},x);t.position.x=0,t.position.y=-1.1,t.position.z=.6+a,t.rotation.x=BABYLON.Tools.ToRadians(-35),t.rotation.y=BABYLON.Tools.ToRadians(0),t.rotation.z=BABYLON.Tools.ToRadians(90);var r=new BABYLON.DynamicTexture("zLabelTexture-"+a,{width:1024,height:512},x),i=r.getContext();i.textAlign="end",i.clearRect(0,0,1024,512);var o=new BABYLON.StandardMaterial("zLabelMat-"+a,x);o.hasAlpha=!0,o.backFaceCulling=!1,o.specularColor=new BABYLON.Color3(0,0,0),o.opacityTexture=r,o.diffuseTexture=r,t.material=o;r.drawText(e,1024,290,"bold 150px monospace","white","transparent",!0,!0)}function s(e,a,r,i,o){var n=r?10*r/o:0,l=new BABYLON.StandardMaterial("blueMaterial",x);l.diffuseColor=N(n/10),l.specularColor=N(n/10),l.emissiveColor=N(n/10),l.ambientColor=N(n/10),l.alpha=.7;const s=new BABYLON.Mesh.CreateSphere(`sphere-${e}-${a}`,64,.3,x);s.material=l,s.position.y=0,s.position.x=e,s.position.z=a,s.isPickable=!0,s.actionManager=new BABYLON.ActionManager(x),s.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,function(i){s.material.alpha=1,h(r,s.absolutePosition,t.x[e],t.z[a],"sphere")})),s.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,function(e){s.material.alpha=.7,A()})),s.parent=i,i.spheres||(i.spheres=[]),i.spheres.push(s),u(`scaleSphereAnimation-${e}-${a}-scale`,"scaling.y",[{frame:0,value:0},{frame:100,value:1}],s),u(`scaleSphereAnimation-${e}-${a}-ypos`,"position.y",[{frame:0,value:0},{frame:100,value:n}],s)}function B(e,a,r,i,o){var n=r?10*r/o/2:0,l=new BABYLON.StandardMaterial("blueMaterial",x);l.diffuseColor=N(2*n/10),l.specularColor=N(2*n/10),l.emissiveColor=N(2*n/10),l.ambientColor=N(2*n/10),l.alpha=.6;const s=new BABYLON.MeshBuilder.CreateCylinder(`bar-${e}-${a}`,{height:10*r/o,diameter:.3},x);s.material=l,s.position.y=0,s.position.x=e,s.position.z=a,s.isPickable=!0,s.actionManager=new BABYLON.ActionManager(x),s.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,function(i){s.material.alpha=1,h(r,s.absolutePosition,t.x[e],t.z[a],"cylinder")})),s.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,function(e){s.material.alpha=.6,A()})),s.parent=i,i.bars||(i.bars=[]),i.bars.push(s),u(`scaleBarAnimation-${e}-${a}-scale`,"scaling.y",[{frame:0,value:0},{frame:100,value:1}],s),u(`scaleBarAnimation-${e}-${a}-scale`,"scaling.x",[{frame:0,value:0},{frame:100,value:1}],s),u(`scaleBarAnimation-${e}-${a}-scale`,"scaling.z",[{frame:0,value:0},{frame:100,value:1}],s),u(`scaleBarAnimation-${e}-${a}-ypos`,"position.y",[{frame:0,value:0},{frame:100,value:n}],s)}function u(e,a,t,r){var i=new BABYLON.BounceEase,o=new BABYLON.Animation(e,a,60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);i.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEOUT),o.setEasingFunction(i),o.setKeys(t),r.animations.push(o),x.beginAnimation(r,0,100,!0)}var c,d=[];function p(e,a,t,r,i){var o=new BABYLON.StandardMaterial("blueMaterial",x);o.diffuseColor=new BABYLON.Color3(0,0,1),o.specularColor=new BABYLON.Color3(0,0,.87),o.emissiveColor=new BABYLON.Color3(0,0,1),o.ambientColor=new BABYLON.Color3(.23,.98,.53),o.alpha=.5;for(var n=[],l=0;l<e.length;l++)if(l>=a&&l<t){var s=e[l].value?10*e[l].value/i:0,B=new BABYLON.Vector3(e[l].x-a,s,e[l].z);n.push(B)}var c=new BABYLON.Mesh.CreateLines("line",n,x,!0);c.color=new BABYLON.Color3(1,1,1),d.push(c),r||u("scaleLineAnimation-scale","scaling.y",[{frame:0,value:0},{frame:100,value:1}],c)}function h(e,a,t,r,i="cylinder"){if(c){c.setEnabled(!0);var o="bold 130px monospace",n=2;switch(i){case"cylinder":n=2;break;case"sphere":n=1;break;default:n=1}c.position={x:a.x,y:a.y*n+.5,z:a.z},c.material.diffuseTexture.getContext().clearRect(0,0,1024,512),e&&c.material.diffuseTexture.drawText("X: "+t,512,100,o,"white","transparent",!0,!0),r&&c.material.diffuseTexture.drawText("Y: "+e,512,250,o,"white","transparent",!0,!0),t&&c.material.diffuseTexture.drawText("Z: "+r,512,400,o,"white","transparent",!0,!0)}}function A(){c&&c.setEnabled(!1)}function L(e,a,r,i,o){var n=Math.round(e);a.position.x=-n;var l=t.x[n],s=t.x[n+r-1]?t.x[n+r-1]:t.x[t.x.length-1];for(var B in i.text=`${l} - ${s}`,a.barLabelsGroup.xLabels)parseInt(B)>=n&&parseInt(B)<n+r?a.barLabelsGroup.xLabels[B].isVisible=!0:a.barLabelsGroup.xLabels[B].isVisible=!1;if("bar"===t.type)for(var B in a.barValuesGroup.bars)a.barValuesGroup.bars[B].position.x>=n&&a.barValuesGroup.bars[B].position.x<n+r?a.barValuesGroup.bars[B].isVisible=!0:a.barValuesGroup.bars[B].isVisible=!1;if("line"===t.type){for(var B in a.spheresGroup.spheres)a.spheresGroup.spheres[B].position.x>=n&&a.spheresGroup.spheres[B].position.x<n+r?a.spheresGroup.spheres[B].isVisible=!0:a.spheresGroup.spheres[B].isVisible=!1;!function(e,a,r){for(var i in d)d[i].setEnabled(!1),d[i].dispose();d=[],O.length||(O=_.groupBy(t.values,"z"));for(var i in O)p(O[i],e,a,w,r);w=!0}(n,n+r,o)}}var x,O=[],w=!1;function N(e=1){var a=new tinycolor({h:30+240*(30-(60*e-30))/60-30,s:80,l:50}).toRgb();return new BABYLON.Color3(a.r/255,a.g/255,a.b/255)}function v(e){var a=new tinycolor(e).toRgb();return new BABYLON.Color3(a.r/255,a.g/255,a.b/255)}var C=new BABYLON.Engine(e,!0,{preserveDrawingBuffer:!0,stencil:!0});!function(){(x=new BABYLON.Scene(C)).clearColor=v(t.backgroundColor),x.ambientColor=v("white");const a=t.z.length;var u=new BABYLON.ArcRotateCamera("camera",-Math.PI/3,5*Math.PI/12,30,new BABYLON.Vector3(t.width/2,2.5,a/2),x);u.attachControl(e,!0);var d=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(0,1,0),x);d.intensity=3,C.runRenderLoop(function(){d.position=u.position}),window.addEventListener("resize",function(){C.resize()}),function(){var e=new BABYLON.StandardMaterial("whiteMaterial",x);e.diffuseColor=new BABYLON.Color3(1,0,1),e.specularColor=new BABYLON.Color3(.5,.6,.87),e.emissiveColor=new BABYLON.Color3(1,1,1),e.ambientColor=new BABYLON.Color3(.23,.98,.53);const a=BABYLON.Mesh.CreateSphere("sphere-origin",64,.3,x);a.color=new BABYLON.Color3(1,1,1),a.material=e}(),r("x",a,t.width),r("y",a,t.width),a&&(r("z",a,t.width),i("xz",a,t.width),i("yz",a,t.width)),i("xy",a,t.width);var p=BABYLON.MeshBuilder.CreateBox("BarGroup",{},x);p.isVisible=!1;var h=BABYLON.MeshBuilder.CreateBox("BarLabelsGroup",{},x);h.isVisible=!1;var A=BABYLON.MeshBuilder.CreateBox("BarValuesGroup",{},x);A.isVisible=!1;var O=BABYLON.MeshBuilder.CreateBox("SpheresGroup",{},x);if(O.isVisible=!1,!t.values.length)for(var w=0;w<t.x.length;w++)for(var N=0;N<(a||1);N++)t.values.push({x:w,z:N,value:(10*Math.random()).toFixed(2)});var g=0;for(var Y in t.values)t.values[Y].value>g&&(g=t.values[Y].value);var b=Math.round(g)/10;for(w=0;w<=10;w++)t.y.push(""+parseFloat(b*w).toFixed(1));for(var Y in t.x)o(t.x[Y],parseInt(Y),h);for(var Y in function(e,a=10,t=10){var r=BABYLON.MeshBuilder.CreateGround("title",{width:10,height:5,subdivisions:8},x);r.position.x=t/2,r.position.y=12,r.position.z=a/2,r.rotation.x=BABYLON.Tools.ToRadians(-90),r.billboardMode=BABYLON.Mesh.BILLBOARDMODE_ALL;var i=new BABYLON.DynamicTexture("titleTexture",{width:1024,height:512},x),o=i.getContext();o.textAlign="center",o.clearRect(0,0,1024,512);var n=new BABYLON.StandardMaterial("titleMat",x);n.hasAlpha=!0,n.backFaceCulling=!1,n.specularColor=new BABYLON.Color3(0,0,0),n.opacityTexture=i,n.diffuseTexture=i,r.material=n,i.drawText(e,512,290,"bold 120px monospace","white","transparent",!0,!0)}(t.title,a,t.width),function(e,a=10){var t=BABYLON.MeshBuilder.CreateGround("xCategory",{width:10,height:5,subdivisions:8},x);t.position.x=a/2,t.position.y=-3,t.rotation.x=BABYLON.Tools.ToRadians(-90);var r=new BABYLON.DynamicTexture("xCategoryTexture",{width:1024,height:512},x),i=r.getContext();i.textAlign="center",i.clearRect(0,0,1024,512);var o=new BABYLON.StandardMaterial("xCategoryMat",x);o.hasAlpha=!0,o.backFaceCulling=!1,o.specularColor=new BABYLON.Color3(0,0,0),o.opacityTexture=r,o.diffuseTexture=r,t.material=o,r.drawText(e,512,290,"bold 100px monospace","white","transparent",!0,!0)}(t.xTitle,t.width),function(e){var a=BABYLON.MeshBuilder.CreateGround("yCategory",{width:10,height:5,subdivisions:8},x);a.position.x=-3,a.position.y=5,a.rotation.y=BABYLON.Tools.ToRadians(-90),a.rotation.z=BABYLON.Tools.ToRadians(90);var t=new BABYLON.DynamicTexture("yCategoryTexture",{width:1024,height:512},x),r=t.getContext();r.textAlign="center",r.clearRect(0,0,1024,512);var i=new BABYLON.StandardMaterial("yCategoryMat",x);i.hasAlpha=!0,i.backFaceCulling=!1,i.specularColor=new BABYLON.Color3(0,0,0),i.opacityTexture=t,i.diffuseTexture=t,a.material=i,t.drawText(e,512,290,"bold 100px monospace","white","transparent",!0,!0)}(t.yTitle),a&&function(e,a){var t=BABYLON.MeshBuilder.CreateGround("zCategory",{width:10,height:5,subdivisions:8},x);t.position.x=0,t.position.y=-3,t.position.z=(a-1)/2,t.rotation.x=BABYLON.Tools.ToRadians(-90),t.rotation.y=BABYLON.Tools.ToRadians(0),t.rotation.z=BABYLON.Tools.ToRadians(90);var r=new BABYLON.DynamicTexture("zCategoryTexture",{width:1024,height:512},x),i=r.getContext();i.textAlign="center",i.clearRect(0,0,1024,512);var o=new BABYLON.StandardMaterial("zCategoryMat",x);o.hasAlpha=!0,o.backFaceCulling=!1,o.specularColor=new BABYLON.Color3(0,0,0),o.opacityTexture=r,o.diffuseTexture=r,t.material=o,r.drawText(e,512,290,"bold 100px monospace","white","transparent",!0,!0)}(t.zTitle,a),t.y)n(t.y[Y],parseInt(Y));for(var Y in t.z)l(t.z[Y],parseInt(Y));for(var Y in t.values)"bar"===t.type&&B(t.values[Y].x,t.values[Y].z,t.values[Y].value,A,g),"line"===t.type&&s(t.values[Y].x,t.values[Y].z,t.values[Y].value,O,g);h.parent=p,A.parent=p,O.parent=p,p.barLabelsGroup=h,p.barValuesGroup=A,p.spheresGroup=O,c=function(){var e=BABYLON.MeshBuilder.CreateGround("floatingLabel",{width:2,height:1,subdivisions:8},x);e.rotation.x=BABYLON.Tools.ToRadians(-90),e.billboardMode=BABYLON.Mesh.BILLBOARDMODE_ALL;var a=new BABYLON.DynamicTexture("floatingTexture",{width:1024,height:512},x),t=a.getContext();t.textAlign="center",t.clearRect(0,0,1024,512);var r=new BABYLON.StandardMaterial("floatingMat",x);return r.hasAlpha=!0,r.backFaceCulling=!1,r.specularColor=new BABYLON.Color3(0,0,0),r.opacityTexture=a,r.diffuseTexture=a,e.material=r,e}(),function(e,a,t=10,r){t+=1;var i=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI"),o=new BABYLON.GUI.StackPanel;o.width="520px",o.top="-30px",o.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,o.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,i.addControl(o);var n=new BABYLON.GUI.TextBlock;n.text="",n.height="30px",n.color="white",o.addControl(n);var l=new BABYLON.GUI.Slider;l.minimum=0,l.maximum=e-t,l.value=e-t,l.height="20px",l.width="200px",l.background="white",l.isThumbClamped=!0,l.borderColor="black",l.onValueChangedObservable.add(function(e){L(e,a,t,n,r)}),L(l.value,a,t,n,r),o.addControl(l)}(t.x.length,p,t.width,g)}(),C.runRenderLoop(function(){x&&x.render()}),window.addEventListener("resize",function(){C.resize()})}